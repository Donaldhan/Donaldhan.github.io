---
layout: page
title: Gethæ­å»ºç§é“¾
subtitle: Gethæ­å»ºç§é“¾
date: 2020-05-19 10:01:00
author: donaldhan
catalog: true
category: BlockChain
categories:
    - Ethereum
tags:
    - Ethereum
---

# å¼•è¨€
åŒºå—é“¾å½“å‰å­˜åœ¨å¾ˆå¤šå…¬é“¾ï¼Œé’ˆå¯¹æˆ‘ä»¬æƒ³ä½¿ç”¨åŒºå—é“¾çš„ç‰¹æ€§ï¼Œä½†å¯¹æ•°æ®ä¸æƒ³å…¬å¼€çš„è¯ï¼Œæˆ‘ä»¬éœ€è¦ç§æœ‰çš„æ–¹å¼ï¼Œç®¡ç†çš„çš„é“¾ï¼Œä»Šå¤©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å¦‚ä½•ç§æœ‰åŒ–éƒ¨ç½²é“¾ã€‚


# ç›®å½•
* [æ­å»ºæµ‹è¯•é“¾](#æ­å»ºæµ‹è¯•é“¾)
    * [åˆ›å»ºåˆå§‹è´¦æˆ·](#åˆ›å»ºåˆå§‹è´¦æˆ·)
    * [ç”Ÿæˆåˆ›ä¸–çºªå—](#ç”Ÿæˆåˆ›ä¸–çºªå—)
    * [å¯åŠ¨ä»¥å¤ªåŠç§æœ‰æµ‹è¯•é“¾](#å¯åŠ¨ä»¥å¤ªåŠç§æœ‰æµ‹è¯•é“¾)
    * [æ·»åŠ PeerèŠ‚ç‚¹](#æ·»åŠ PeerèŠ‚ç‚¹)
* [æµ‹è¯•ä»¥å¤ªåŠç§æœ‰é“¾](#æµ‹è¯•ä»¥å¤ªåŠç§æœ‰é“¾)
  * [æŒ–çŸ¿](#æŒ–çŸ¿)
  * [è½¬è´¦äº¤æ˜“](#è½¬è´¦äº¤æ˜“)
* [æ€»ç»“](#æ€»ç»“)
* [é™„](#é™„)



## æ­å»ºæµ‹è¯•é“¾
æˆ‘ä»¬é€‰æ‹©ä»æºç ç¼–è¯‘çš„æ–¹å¼ï¼Œå®‰è£…geth

ä¸‹è½½GOå®‰è£…åŒ…ï¼Œå¹¶è§£å‹ï¼Œé…ç½®ç¯å¢ƒå˜é‡
```
export GO_HOME=/home/donaldhan/Documents/go/go
export PATH=${JAVA_HOME}/bin:${GO_HOME}/bin:$PATH
```

ä»githubå…‹éš†go-ethereum
```
git clone https://github.com/ethereum/go-ethereum
```


Building geth requires Go and C compilers to be installed:
```
sudo apt-get install -y build-essential
```

Finally, build the geth program using the following command.

```
cd go-ethereum
make geth
```

You can now run build/bin/geth to start your node.

é…ç½®ç¯å¢ƒå˜é‡
```
export GO_HOME=/home/donaldhan/Documents/go/go
export GETH_HOME=/home/donaldhan/Documents/ethereum/go-ethereum-master/build
export PATH=${JAVA_HOME}/bin:${GO_HOME}/bin:${GETH_HOME}/bin:$PATH
```

éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸ
```
geth -help
```
geth

å®‰è£…å‚è€ƒï¼š
[Installation Instructions for Ubuntu](https://github.com/ethereum/go-ethereum/wiki/Installation-Instructions-for-Ubuntu)

ä½ ä¹Ÿå¯ä»¥é€‰æ‹©åœ¨çº¿å®‰è£…ï¼Œä¸è¿‡å¯èƒ½ä¸€é‡åˆ°ä¾èµ–åŒ…çš„é—®é¢˜ã€‚

### åˆ›å»ºåˆå§‹è´¦æˆ·

åˆ›å»ºè´¦æˆ·ï¼Œ éœ€è¦è¾“å…¥è´¦æˆ·å¯†ç , ä¸»è¦ä¸ºäº†ç»™è¿™äº›ç”¨æˆ·åˆå§‹åŒ–å¸
```
geth --datadir /home/donaldhan/Documents/data  account new
```

```
donaldhan@Donaldhan:~/Documents$ geth --datadir /home/donaldhan/Documents/data  account new
INFO [03-13|15:40:25.094] Maximum peer count                       ETH=50 LES=0 total=50
INFO [03-13|15:40:25.095] Smartcard socket not found, disabling    err="stat /run/pcscd/pcscd.comm: no such file or directory"
Your new account is locked with a password. Please give a password. Do not forget this password.
Password: 
Repeat password: 

Your new key was generated

Public address of the key:   0xA65Cf03166298503D8E81053167bB8d97213F4A2
Path of the secret key file: /home/donaldhan/Documents/data/keystore/UTC--2020-03-13T07-40-29.362296417Z--a65cf03166298503d8e81053167bb8d97213f4a2

- You can share your public address with anyone. Others need it to interact with you.
- You must NEVER share the secret key with anyone! The key controls access to your funds!
- You must BACKUP your key file! Without the key, it's impossible to access account funds!
- You must REMEMBER your password! Without the password, it's impossible to decrypt the key!


```

ä¼šåœ¨æŒ‡å®šç›®å½•ä¸‹ç”Ÿæˆ/home/donaldhan/Documents/data/keystoreç›®å½•ï¼Œå¹¶å»ºç«‹ä¸€ä¸ªç±»ä¼¼äº
â€™UTCâ€“2018-10-25T05-33-32.625847732Zâ€“{è´¦æˆ·åœ°å€}â€™çš„æ–‡ä»¶ã€‚
èŠ±æ‹¬å·é‡Œé¢å°±æ˜¯æ–°ç”Ÿæˆçš„è´¦æˆ·åœ°å€ã€‚

```
donaldhan@Donaldhan:~/Documents$ ls ./data/keystore/
UTC--2020-03-13T07-40-29.362296417Z--a65cf03166298503d8e81053167bb8d97213f4a2
```


ç›¸åŒçš„æ–¹å¼ï¼Œå†åˆ›å»ºä¸¤ä¸ªè´¦æˆ·ã€‚

æŸ¥çœ‹æˆ‘ä»¬åˆ›å»ºçš„è´¦æˆ·
```
geth account list --keystore /home/donaldhan/Documents/data/keystore
```

```
donaldhan@Donaldhan:~/Documents/data/keystore$ geth account list --keystore /home/donaldhan/Documents/data/keystore
INFO [03-13|15:45:39.193] Maximum peer count                       ETH=50 LES=0 total=50
INFO [03-13|15:45:39.193] Smartcard socket not found, disabling    err="stat /run/pcscd/pcscd.comm: no such file or directory"
Account #0: {a65cf03166298503d8e81053167bb8d97213f4a2} keystore:///home/donaldhan/Documents/data/keystore/UTC--2020-03-13T07-40-29.362296417Z--a65cf03166298503d8e81053167bb8d97213f4a2
Account #1: {2916e02bed03db3e3bc7bc50d3dc58600b6345e7} keystore:///home/donaldhan/Documents/data/keystore/UTC--2020-03-13T07-42-14.963869120Z--2916e02bed03db3e3bc7bc50d3dc58600b6345e7
Account #2: {9caffa7e0b76ed259725105ada174041023cf4a3} keystore:///home/donaldhan/Documents/data/keystore/UTC--2020-03-13T07-42-36.078329675Z--9caffa7e0b76ed259725105ada174041023cf4a3

```

æˆ‘ä»¬åˆ›å»ºäº†3ä¸ªè´¦æˆ·

```
donaldhan@Donaldhan:~/Documents$ ls ./data/keystore/
UTC--2020-03-13T07-40-29.362296417Z--a65cf03166298503d8e81053167bb8d97213f4a2
UTC--2020-03-13T07-42-14.963869120Z--2916e02bed03db3e3bc7bc50d3dc58600b6345e7
UTC--2020-03-13T07-42-36.078329675Z--9caffa7e0b76ed259725105ada174041023cf4a3
donaldhan@Donaldhan:~/Documents$ 

```


è‡ªå®šä¹‰åˆ›ä¸–å—ï¼ˆGenesis Blockï¼‰

```
{
		"config": {
			"chainId": 3131,
			"homesteadBlock": 0,
      "eip150Block": 0,
			"eip155Block": 0,
			"eip158Block": 0
		},
		"difficulty": "10000",
		"gasLimit": "2100000",
		"alloc": {
			"a65cf03166298503d8e81053167bb8d97213f4a2": { "balance": "800" },
			"2916e02bed03db3e3bc7bc50d3dc58600b6345e7": { "balance": "600" },
            "9caffa7e0b76ed259725105ada174041023cf4a3": { "balance": "800" }
		}
}
```


åˆ›ä¸–å—æ˜¯åŒºå—é“¾ä¸­çš„ç¬¬ä¸€ä¸ªåˆå§‹åŒºå—ï¼Œæˆ‘ä»¬é€šè¿‡å®šä¹‰CustomGenesis.jsonæ–‡ä»¶æ¥å¯¹å…¶è¿›è¡Œè‡ªå®šä¹‰ã€‚

åœ¨åˆ›ä¸–å—çš„é…ç½®æ–‡ä»¶^1ä¸­ï¼Œæœ‰å››ä¸ªå‚æ•°æ˜¯å¿…é¡»è¦æŒ‡å®šçš„ï¼š

```
configï¼šåŒºå—é“¾çš„ç›¸å…³å‚æ•°
    chainIdï¼šé˜²æ­¢é‡æ”¾æ”»å‡»ï¼ˆreplay attackï¼Œç®€å•æ¥è¯´å°±æ˜¯æœªç»æˆæƒçš„ç”¨æˆ·æ¥å‡æ‰®äº¤æ˜“çš„å‘é€è€…ï¼‰
    homesteadBlockï¼šHomestead^2æ˜¯ä»¥å¤ªåŠçš„ç¬¬äºŒä¸ªå‘è¡Œç‰ˆæœ¬ï¼ˆFrontier^3æ˜¯ç¬¬ä¸€ä¸ªå‘è¡Œç‰ˆæœ¬ï¼‰ï¼Œå€¼ä¸º0è¡¨ç¤ºçš„ä½¿ç”¨çš„æ˜¯è¯¥ç‰ˆæœ¬çš„ä»¥å¤ªåŠ
difficultï¼šåˆå§‹æŒ–çŸ¿éš¾åº¦
gasLimitï¼šæ¯ä¸€ä¸ªåŒºå—æ‰€æ¶ˆè€—çš„gasä¸Šé™
allocï¼šå¯ä»¥å¾€åœ°å€ä¸­é¢„å…ˆåˆ†é…ä»¥å¤ªå¸
```

difficulté…ç½®ä½çš„è¯ï¼Œæœ‰åˆ©äºæˆ‘ä»¬æŒ–çŸ¿ã€‚

**æ³¨æ„ï¼Œallocä¸­çš„è´¦æˆ·ï¼Œå¿…é¡»æå‰åˆ›å»º**


### ç”Ÿæˆåˆ›ä¸–çºªå—
ä½¿ç”¨ä¸‹åˆ—å‘½ä»¤æ¥åˆå§‹åŒ–åˆ›ä¸–å—ï¼š

```
geth --datadir /home/donaldhan/Documents/data init /home/donaldhan/Documents/CustomGenesis.json
```


ç›¸å…³å‚æ•°è¯´æ˜
* --datadirï¼šæŒ‡å®šåŒºå—é“¾çš„æ•°æ®ç›®å½•ï¼ˆé»˜è®¤ä¸º~/.ethereumï¼‰
* initï¼šåˆ›ä¸–å—åˆå§‹åŒ–JSONæ–‡ä»¶çš„ç›®å½•

æ—¥å¿—è¾“å‡º
```
donaldhan@Donaldhan:~/Documents$ geth --datadir /home/donaldhan/Documents/data/geth init /home/donaldhan/Documents/CustomGenesis.json
INFO [03-13|16:05:53.355] Maximum peer count                       ETH=50 LES=0 total=50
INFO [03-13|16:05:53.355] Smartcard socket not found, disabling    err="stat /run/pcscd/pcscd.comm: no such file or directory"
INFO [03-13|16:05:53.360] Allocated cache and file handles         database=/home/donaldhan/Documents/data/geth/geth/chaindata cache=16.00MiB handles=16
INFO [03-13|16:05:53.380] Writing custom genesis block 
INFO [03-13|16:05:53.381] Persisted trie from memory database      nodes=5 size=650.00B time=134.305Âµs gcnodes=0 gcsize=0.00B gctime=0s livenodes=1 livesize=0.00B
INFO [03-13|16:05:53.381] Successfully wrote genesis state         database=chaindata hash=67c663â€¦85d298
INFO [03-13|16:05:53.381] Allocated cache and file handles         database=/home/donaldhan/Documents/data/geth/geth/lightchaindata cache=16.00MiB handles=16
INFO [03-13|16:05:53.396] Writing custom genesis block 
INFO [03-13|16:05:53.397] Persisted trie from memory database      nodes=5 size=650.00B time=195.231Âµs gcnodes=0 gcsize=0.00B gctime=0s livenodes=1 livesize=0.00B
INFO [03-13|16:05:53.398] Successfully wrote genesis state         database=lightchaindata hash=67c663â€¦85d298
                 hash=54fd3fâ€¦dfac23
```

ç°åœ¨æˆ‘ä»¬å¯åŠ¨gethèŠ‚ç‚¹ã€‚

### å¯åŠ¨ä»¥å¤ªåŠç§æœ‰æµ‹è¯•é“¾
ç›¸å…³å¯åŠ¨å‚æ•°

å¯åŠ¨gethæœ‰å¦‚ä¸‹ä¸»è¦å‚æ•°ï¼ˆå¯ä»¥ä½¿ç”¨geth --helpè¿›è¡ŒæŸ¥çœ‹ï¼‰ï¼š
```
--nodiscoverï¼šå…³é—­èŠ‚ç‚¹çš„å¯å‘ç°æ€§ï¼Œå¯ä»¥é˜²æ­¢ä½¿ç”¨äº†ç›¸åŒnetwork idå’Œåˆ›ä¸–å—çš„èŠ‚ç‚¹è¿æ¥åˆ°ä½ çš„åŒºå—é“¾ç½‘ç»œä¸­ï¼ˆåªèƒ½é€šè¿‡æ‰‹åŠ¨æ¥æ·»åŠ èŠ‚ç‚¹ï¼‰
--maxpeers 0ï¼šæŒ‡å®šç½‘ç»œä¸­çš„æœ€å¤šèŠ‚ç‚¹æ•°
--rpcï¼šå¯ç”¨RPCæœåŠ¡
--rpcapi "db,eth,net,web3"ï¼šæŒ‡å®šå¯ç”¨çš„RPC API
--rpcport "8080"ï¼šæŒ‡å®šRPCçš„ç«¯å£
--rpccorsdomainï¼šæŒ‡å®šå“ªäº›URLå¯ä»¥è¿æ¥åˆ°ä½ çš„èŠ‚ç‚¹
--datadirï¼šä»¥å¤ªåŠåŒºå—é“¾çš„æ•°æ®ç›®å½•
--portï¼šè¿æ¥åˆ°å…¶å®ƒèŠ‚ç‚¹çš„ç½‘ç»œç›‘å¬ç«¯å£
--identity "FirstNode"ï¼šæŒ‡å®šèŠ‚ç‚¹åç§°
consoleï¼šå¯åŠ¨gethæ§åˆ¶å°ç¨‹åº
```
å¯åŠ¨geth

ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥å¯åŠ¨gethï¼š

```
geth --identity "ETH-MainNode" --rpc --rpcport "6060" --rpccorsdomain "*" --datadir "/home/donaldhan/Documents/data" --port "30303" --maxpeers 5 --rpcapi "admin,db,eth,debug,miner,net,shh,txpool,personal,web3" --networkid 3131 console

```

æŸ¥çœ‹è´¦æˆ·ä½™é¢
```
> eth.getBalance("a65cf03166298503d8e81053167bb8d97213f4a2")
800
> eth.getBalance("2916e02bed03db3e3bc7bc50d3dc58600b6345e7")
600
> eth.getBalance("9caffa7e0b76ed259725105ada174041023cf4a3")
800
> 
```

åˆå§‹åŒ–è´¦æˆ·ä½™é¢æˆåŠŸï¼›å¦‚æœä¸æˆåŠŸï¼Œå°†dataç›®å½•ä¸‹çš„gethç›®å½•ç§»é™¤ï¼Œé‡æ–°åˆ›å»ºåˆ›ä¸–çºªå—ï¼ŒåŠå¯åŠ¨èŠ‚ç‚¹å³å¯ã€‚

```
donaldhan@Donaldhan:~/Documents/data$ ls
geth  history  keystore
donaldhan@Donaldhan:~/Documents/data$ rm -r geth
donaldhan@Donaldhan:~/Documents/data$ ls
history  keystore
donaldhan@Donaldhan:~/Documents/data$ rm -r history 
donaldhan@Donaldhan:~/Documents/data$ ls
keystore

```

ä½¿ç”¨ç›¸åŒçš„é…ç½®å¯¹ä¸€ä¸ªèŠ‚ç‚¹è¿›è¡Œé…ç½®å¹¶å¯åŠ¨ã€‚

**æ³¨æ„é…ç½®ä¸€å®šè¦ä¸€ç›´ï¼Œ å¦åˆ™ï¼Œæ·»åŠ peerèŠ‚ç‚¹çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šå¤±è´¥**  

å¯åŠ¨å¦å¤–ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆETH-SlaveNodeï¼‰æ—¶, å¯ä»¥é‡æ–°å®šä¹‰èŠ‚ç‚¹çš„identity
```
geth --identity "ETH-SlaveNode" --rpc --rpcport "6060" --rpccorsdomain "*" --datadir "/home/donaldhan/Documents/data" --port "30303" --maxpeers 5 --rpcapi "admin,db,eth,debug,miner,net,shh,txpool,personal,web3" --networkid 3131 console
```
å½“å‰æˆ‘ä»¬çš„æœ‰è¿ä¸ªèŠ‚ç‚¹ï¼Œæˆ‘ä»¬ç°åœ¨ä¸¤ä¸ªèŠ‚ç‚¹æ·»åŠ åˆ°åŒä¸€é“¾ä¸Šã€‚


### æ·»åŠ PeerèŠ‚ç‚¹

åœ¨å…¶ä¸­ETH-MainNodeèŠ‚ç‚¹çš„gethæ§åˆ¶å°ä¸­æ‰§è¡Œï¼š
```
admin.nodeInfo
```
å¯ä»¥çš„èŠ‚ç‚¹ä¿¡æ¯
```
> admin.nodeInfo
{
  enode: "enode://f78e7061fbc93ebb03ca7cdb36f2bda17b726cd034ef7d46423af64f8e8040d6fe5379885aa2f40052194421c123627ab4cf311b82d6696856be6b68fe5cb337@127.0.0.1:30303?discport=0",
  enr: "enr:-JC4QE0BLBE3R6dJ1YYMdbWQTUdca46zJiQleYY8yfTSUafjRp2sH-DIvmrFn8MZr0w1rYAsoFtBq54RUEH1lCNyGisBg2V0aMfGhO9Ad0-AgmlkgnY0gmlwhH8AAAGJc2VjcDI1NmsxoQP3jnBh-8k-uwPKfNs28r2he3Js0DTvfUZCOvZPjoBA1oN0Y3CCdl8",
  id: "6d0015752dd6c66aa4b89981f627dc4aa35b82d40df2735c85c55d8e46f09c32",
  ip: "127.0.0.1",
  listenAddr: "0.0.0.0:30303",
  name: "Geth/ETH-MainNode/v1.9.12-unstable/linux-amd64/go1.14",
  ports: {
    discovery: 0,
    listener: 30303
  },
  protocols: {
    eth: {
      config: {
        chainId: 3131,
        eip150Block: 0,
        eip150Hash: "0x0000000000000000000000000000000000000000000000000000000000000000",
        eip155Block: 0,
        eip158Block: 0,
        homesteadBlock: 0
      },
      difficulty: 10000,
      genesis: "0x67c66380b3275fb6fd3e534ef51ca097fc9c5fbb66aed255ec29869bfe85d298",
      head: "0x67c66380b3275fb6fd3e534ef51ca097fc9c5fbb66aed255ec29869bfe85d298",
      network: 3131
    }
  }
}
> 

```

ä»ä¸Šé¢ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°enodeä¿¡æ¯ï¼š

```
enode: "enode://f78e7061fbc93ebb03ca7cdb36f2bda17b726cd034ef7d46423af64f8e8040d6fe5379885aa2f40052194421c123627ab4cf311b82d6696856be6b68fe5cb337@192.168.230.128:30303?discport=0"
```




æˆ‘ä»¬éœ€è¦åœ¨å¦ä¸€å°ETH-SlaveNodeèŠ‚ç‚¹ä¸Šæ·»åŠ ETH-MainNodeèŠ‚ç‚¹ï¼Œä½¿ç”¨å‘½ä»¤ï¼š
```
> admin.addPeer("enode://f78e7061fbc93ebb03ca7cdb36f2bda17b726cd034ef7d46423af64f8e8040d6fe5379885aa2f40052194421c123627ab4cf311b82d6696856be6b68fe5cb337@192.168.230.128:30303")
true
```

**æ³¨æ„è¿”å›ä¸ºtrueä¸ä¸€å®šæ·»åŠ æˆåŠŸ**


æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹æ˜¯å¦æ·»åŠ peer
```
> net.peerCount
1
> admin.peers
[{
    caps: ["eth/63", "eth/64", "eth/65"],
    enode: "enode://f78e7061fbc93ebb03ca7cdb36f2bda17b726cd034ef7d46423af64f8e8040d6fe5379885aa2f40052194421c123627ab4cf311b82d6696856be6b68fe5cb337@192.168.230.128:30303",
    id: "6d0015752dd6c66aa4b89981f627dc4aa35b82d40df2735c85c55d8e46f09c32",
    name: "Geth/ETH-MainNode/v1.9.12-unstable/linux-amd64/go1.14",
    network: {
      inbound: false,
      localAddress: "192.168.230.129:34018",
      remoteAddress: "192.168.230.128:30303",
      static: true,
      trusted: false
    },
    protocols: {
      eth: {
        difficulty: 10000,
        head: "0x67c66380b3275fb6fd3e534ef51ca097fc9c5fbb66aed255ec29869bfe85d298",
        version: 65
      }
    }
}]
> 


```

å½“net.peerCountå¤§äº0,è¿™å¯ä»¥ç¡®è®¤èŠ‚ç‚¹æ·»åŠ æˆåŠŸï¼ŒåŒæ—¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨admin.peersï¼ŒæŸ¥çœ‹å¯¹åº”çš„èŠ‚ç‚¹çŠ¶æ€ï¼›

æˆ‘ä»¬çœ‹åˆ°ETH-MainNodeå·²ç»æ·»åŠ äº†ETH-SlaveNodeèŠ‚ç‚¹ã€‚

åŒæ—¶åœ¨å¦å¤–peerèŠ‚ç‚¹ï¼Œå¯ä»¥çœ‹åˆ°æ§åˆ¶è¾“å‡ºä»¥ä¸‹æ—¥å¿—
```
INFO [03-16|11:20:42.774] Looking for peers                        peercount=1 tried=2 static=1
INFO [03-16|11:20:59.281] Looking for peers                        peercount=1 tried=6 static=1
INFO [03-16|11:21:14.282] Looking for peers                        peercount=1 tried=2 static=1

```
peerèŠ‚ç‚¹æ•°ä¸º1ã€‚


## æµ‹è¯•ä»¥å¤ªåŠç§æœ‰é“¾
æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨ä¸¤ä¸ªèŠ‚ç‚¹åˆ†åˆ«åˆ›å»ºè´¦å·æ„é€ ä¸€ç¬”è½¬è´¦äº¤æ˜“æ¥éªŒè¯å¤šèŠ‚ç‚¹çš„ç§é“¾æ˜¯å¦æ­å»ºæˆåŠŸã€‚

### æŒ–çŸ¿
æˆ‘ä»¬å…ˆæ¥ä½“éªŒä¸€ä¸‹æŒ–çŸ¿

åˆ†åˆ«åœ¨ä¸¤ä¸ªèŠ‚ç‚¹ä¸­åˆ›å»ºè´¦å·ï¼š
```
> personal.newAccount()
```
è®¾ç½®å¯†ç åï¼Œå¾—åˆ°åœ°å€ã€‚å…·ä½“å¦‚ä¸‹ï¼š


ETH-MainNodeèŠ‚ç‚¹ï¼š
```
>  personal.newAccount()
Passphrase: 
Repeat passphrase: 
INFO [03-16|11:24:47.633] Your new key was generated               address=0xB5F49168E69DF3030541199F5A5b3442bB40172C
WARN [03-16|11:24:47.633] Please backup your key file!             path=/home/donaldhan/Documents/data/keystore/UTC--2020-03-16T03-24-40.534092299Z--b5f49168e69df3030541199f5a5b3442bb40172c
WARN [03-16|11:24:47.633] Please remember your password! 
"0xb5f49168e69df3030541199f5a5b3442bb40172c"
```


ETH-SlaveNodeèŠ‚ç‚¹ï¼š
```
> personal.newAccount()
Passphrase: 
Repeat passphrase: 
INFO [03-16|11:25:25.479] Your new key was generated               address=0x4B16A5C65FCcac7c7B535b53a7003fAc829543D4
WARN [03-16|11:25:25.480] Please backup your key file!             path=/home/donaldhan/Documents/data/keystore/UTC--2020-03-16T03-25-18.482618070Z--4b16a5c65fccac7c7b535b53a7003fac829543d4
WARN [03-16|11:25:25.480] Please remember your password! 
"0x4b16a5c65fccac7c7b535b53a7003fac829543d4"
> eth.accounts
["0x4b16a5c65fccac7c7b535b53a7003fac829543d4"]
> 

```

ETH-MainNodeèŠ‚ç‚¹å¼€å§‹æŒ–çŸ¿ï¼š

ç”±äºæ–°åˆ›å»ºçš„è´¦å·ä¸­æ˜¯æ²¡æœ‰ä»¥å¤ªå¸çš„ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å¯ç”¨çŸ¿å·¥è¿›è¡ŒæŒ–çŸ¿ï¼š
```
> miner.setEtherbase("0xb5f49168e69df3030541199f5a5b3442bb40172c")

true
> miner.start(1)

INFO [03-13|14:27:54] Updated mining threads                   threads=1
INFO [03-13|14:27:54] Transaction pool price threshold updated price=18000000000
INFO [03-13|14:27:54] Starting mining operation
null
> INFO [03-13|14:27:54] Commit new mining work                   number=1 txs=0 uncles=0 elapsed=0s
INFO [03-13|14:27:57] Generating DAG in progress               epoch=0 percentage=0 elapsed=2.001s
INFO [03-13|14:27:59] Generating DAG in progress               epoch=0 percentage=1 elapsed=3.953s
```
ETH-SlaveNodeèŠ‚ç‚¹åŒæ ·å¼€å¯æŒ–çŸ¿ï¼š
```
> miner.setEtherbase("0x4b16a5c65fccac7c7b535b53a7003fac829543d4")
> miner.start(1)
```

ç­‰ä¸€æ®µæ—¶é—´ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ§åˆ¶å°è¾“å‡º
```
INFO [03-16|14:05:08.399] ğŸ”¨ mined potential block                  number=2378 hash=cb6462â€¦80e194
INFO [03-16|14:05:08.396] Commit new mining work                   number=2379 sealhash=3c6f86â€¦0be3d4 uncles=0 txs=0 gas=0 fees=0 elapsed=143.602Âµs
> miner.stop()
null

```

å·²æŒ–çš„2379ä¸ªåŒºå—ã€‚
æŸ¥çœ‹æŒ–çŸ¿è´¦æˆ·çš„ä½™é¢
```
> eth.blockNumber
2378
> eth.getBalance("0xb5f49168e69df3030541199f5a5b3442bb40172c")
5.8871875e+21
```


åœæ­¢æŒ–çŸ¿
```
> miner.stop()

true
>
```
è¿™æ˜¯è´¦æˆ·å·²ç»æœ‰äº†ETHï¼Œæˆ‘ä»¬æ¥ä½“éªŒä¸€ä¸‹è½¬è´¦äº¤æ˜“ã€‚

**è¿™é‡Œæœ‰ä¸ªç–‘é—®ï¼Œæ²¡æœ‰äº¤æ˜“ï¼Œæ€ä¹ˆä¼šå‡­ç©ºäº§ç”Ÿå—å‘¢ï¼Ÿï¼Ÿï¼Ÿï¼Œè‡ªåŠ¨æŒ–çŸ¿**

### è½¬è´¦äº¤æ˜“

æˆ‘ä»¬æ–°åˆ›å»ºä¸€ä¸ªè´¦å·æ¨¡æ‹Ÿè½¬è´¦ï¼š
```
> personal.newAccount()
Passphrase: 
Repeat passphrase: 
INFO [03-16|14:33:30.865] Looking for peers                        peercount=1 tried=2  static=1
INFO [03-16|14:33:30.943] Your new key was generated               address=0x26d6E7a5593BD71Bfc7E8D1042a975F6E29Ee794
WARN [03-16|14:33:30.945] Please backup your key file!             path=/home/donaldhan/Documents/data/keystore/UTC--2020-03-16T06-33-26.791966726Z--26d6e7a5593bd71bfc7e8d1042a975f6e29ee794
WARN [03-16|14:33:30.945] Please remember your password! 
"0x26d6e7a5593bd71bfc7e8d1042a975f6e29ee794"
```

ä»ETH-MainNodeèŠ‚ç‚¹æŒ–çŸ¿è´¦å·ä¸­è½¬2ä¸ªä»¥å¤ªå¸åˆ°ä¸Šé¢è¿™ä¸ªè´¦å·ä¸­;

å…ˆçœ‹ä¸€ä¸‹ä¸¤ä¸ªè´¦æˆ·çš„ä½™é¢
```
> eth.getBalance("0xb5f49168e69df3030541199f5a5b3442bb40172c")
5.8871875e+21
> eth.getBalance("0x26d6e7a5593bd71bfc7e8d1042a975f6e29ee794")
0
```


åœ¨è½¬è´¦ä¹‹å‰ï¼Œå…ˆè§£é”è´¦å·

```
> personal.unlockAccount("0xb5f49168e69df3030541199f5a5b3442bb40172c")
Unlock account 0xb5f49168e69df3030541199f5a5b3442bb40172c
Passphrase: 
true
> 
```


ä»åŸå§‹è´¦æˆ·è½¬è´¦åˆ°æ–°åˆ›å»ºçš„è´¦æˆ·
```
 eth.sendTransaction({from: "0xb5f49168e69df3030541199f5a5b3442bb40172c", to: "0x26d6e7a5593bd71bfc7e8d1042a975f6e29ee794", value: web3.toWei(2, "ether")})
```


```
>  eth.sendTransaction({from: "0xb5f49168e69df3030541199f5a5b3442bb40172c", to: "0x26d6e7a5593bd71bfc7e8d1042a975f6e29ee794", value: web3.toWei(2, "ether")})
INFO [03-16|16:22:24.014] Setting new local account                address=0xB5F49168E69DF3030541199F5A5b3442bB40172C
INFO [03-16|16:22:24.014] Submitted transaction                    fullhash=0xea177fff6c80eac5e57b537b6452e1617533e4d6853698d39e749574b30c19c6 recipient=0x26d6E7a5593BD71Bfc7E8D1042a975F6E29Ee794
"0xea177fff6c80eac5e57b537b6452e1617533e4d6853698d39e749574b30c19c6"
> 
```

æŸ¥çœ‹å¯¹åº”è´¦å·çš„ä½™é¢ã€‚



```
> eth.getBalance("0xb5f49168e69df3030541199f5a5b3442bb40172c")
5.8871875e+21
> eth.getBalance("0x26d6e7a5593bd71bfc7e8d1042a975f6e29ee794")
0
```

è¿™æ˜¯æˆ‘ä»¬æŸ¥çœ‹æ”¶æ¬¾è´¦å·æ˜¯æ²¡æœ‰ä½™é¢çš„

```
> eth.getBalance("0x26d6e7a5593bd71bfc7e8d1042a975f6e29ee794")
0
```

è¿™æ˜¯å› ä¸ºè¿™ä¸ªäº¤æ˜“æ²¡æœ‰ä¸Šé“¾ï¼Œæˆ‘ä»¬


æˆ‘ä»¬æ‰§è¡ŒæŒ–çŸ¿æ“ä½œ
```
> miner.start(1)
INFO [03-16|16:26:28.157] Updated mining threads                   threads=1
INFO [03-16|16:26:28.158] Transaction pool price threshold updated price=1000000000
null
> INFO [03-16|16:26:28.158] Commit new mining work                   number=2379 sealhash=5a4f9câ€¦74fa83 uncles=0 txs=0 gas=0 fees=0 elapsed=404.089Âµs
INFO [03-16|16:26:28.159] Commit new mining work                   number=2379 sealhash=25c415â€¦25f46c uncles=0 txs=1 gas=21000 fees=2.1e-05 elapsed=1.243ms
INFO [03-16|16:26:35.035] Looking for peers                        peercount=1 tried=2 static=1
> miner.stop
function()
> miner.stopINFO [03-16|16:26:43.178] Successfully sealed new block            number=2379 sealhash=25c415â€¦25f46c hash=20c93fâ€¦5f0c2d elapsed=15.019s
INFO [03-16|16:26:43.179] ğŸ”¨ mined potential block                  number=2379 hash=20c93fâ€¦5f0c2d
INFO [03-16|16:26:43.180] Commit new mining work                   number=2380 sealhash=e0ac34â€¦d09cce uncles=0 txs=0 gas=0     fees=0       elapsed=234.21Âµs
```

ç„¶ååœæ­¢æŒ–çŸ¿
```
> miner.stop()
null
```

å†æ¬¡æŸ¥çœ‹æ”¶æ¬¾è´¦æˆ·ä½™é¢ï¼Œå¦‚ä¸‹
```
> eth.getBalance("0x26d6e7a5593bd71bfc7e8d1042a975f6e29ee794")
2000000000000000000

```

è¡¨æ˜è½¬è´¦æˆåŠŸã€‚

**ä½¿ç”¨åŸå§‹è´¦æˆ·è½¬è´¦ï¼Œä¼šå‡ºç°ï¼Œè´¦æˆ·ä½™é¢ä¸è¶³çš„æƒ…å†µï¼Œå…·ä½“åŸå› è§é™„ç¯‡é—®é¢˜é›†ï¼›**



æŸ¥çœ‹äº¤æ˜“ä¿¡æ¯
```
eth.getTransaction('0xea177fff6c80eac5e57b537b6452e1617533e4d6853698d39e749574b30c19c6')
```

```
eth.getTransaction('0xea177fff6c80eac5e57b537b6452e1617533e4d6853698d39e749574b30c19c6')
{
  blockHash: "0x20c93f53d1eadc665f3c7e9cdf0eaca296daffec9f5c4f2aed7d568cbc5f0c2d",
  blockNumber: 2379,
  from: "0xb5f49168e69df3030541199f5a5b3442bb40172c",
  gas: 21000,
  gasPrice: 1000000000,
  hash: "0xea177fff6c80eac5e57b537b6452e1617533e4d6853698d39e749574b30c19c6",
  input: "0x",
  nonce: 0,
  r: "0xebdb97967ce641501c5505c4e4aae26a4c4548c9bbd32678315fe1caecf2313d",
  s: "0x50f000622ad1908f7a2e35f984d19fa9172d2e2852936240222043568b0d76a3",
  to: "0x26d6e7a5593bd71bfc7e8d1042a975f6e29ee794",
  transactionIndex: 0,
  v: "0x1899",
  value: 2000000000000000000
}
```
åœ¨ETH-SlaveNodeèŠ‚ç‚¹ä¸ŠæŸ¥çœ‹äº¤æ˜“ï¼ŒåŠè´¦æˆ·ä½™é¢

```
> eth.getTransaction('0xea177fff6c80eac5e57b537b6452e1617533e4d6853698d39e749574b30c19c6')
{
  blockHash: "0x20c93f53d1eadc665f3c7e9cdf0eaca296daffec9f5c4f2aed7d568cbc5f0c2d",
  blockNumber: 2379,
  from: "0xb5f49168e69df3030541199f5a5b3442bb40172c",
  gas: 21000,
  gasPrice: 1000000000,
  hash: "0xea177fff6c80eac5e57b537b6452e1617533e4d6853698d39e749574b30c19c6",
  input: "0x",
  nonce: 0,
  r: "0xebdb97967ce641501c5505c4e4aae26a4c4548c9bbd32678315fe1caecf2313d",
  s: "0x50f000622ad1908f7a2e35f984d19fa9172d2e2852936240222043568b0d76a3",
  to: "0x26d6e7a5593bd71bfc7e8d1042a975f6e29ee794",
  transactionIndex: 0,
  v: "0x1899",
  value: 2000000000000000000
}
> eth.getBalance("0x26d6e7a5593bd71bfc7e8d1042a975f6e29ee794")
2000000000000000000
> 

```
ä¿¡æ¯ä¸MainNodeèŠ‚ç‚¹ä¿¡æ¯ï¼Œä¸€è‡´ï¼Œè¡¨æ˜åœ¨åŒä¸€ä¸ªé“¾ï¼ŒåŒæ—¶æ•°æ®ä¸€è‡´ã€‚

æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ä»¥å¤ªåŠæµè§ˆå™¨æŸ¥çœ‹å…ˆå…³äº¤æ˜“å’ŒåŒºå—ï¼Œå…·ä½“å‚è€ƒï¼š

[åŒºå—é“¾æµè§ˆå™¨](/doc/åŒºå—é“¾æµè§ˆå™¨.md)

è‡³æ­¤ï¼Œæˆ‘ä»¬çš„ç§é“¾æ­å»ºå®Œæˆã€‚


# æ€»ç»“

æˆ‘ä»¬ä»æºç ç¼–è¯‘å®‰è£…çš„ä»¥å¤ªåŠå®¢æˆ·ç«¯GETHï¼Œä½¿ç”¨ä¸¤ä¸ªèŠ‚ç‚¹ä½“éªŒäº†ä¸€ä¸‹æŒ–çŸ¿å’Œè½¬è´¦äº¤æ˜“çš„æ•´ä¸ªè¿‡ç¨‹ã€‚åœ¨åˆå§‹åŒ–åˆ›ä¸–çºªå—çš„æ—¶å€™ï¼Œå¦‚æœè¦ç»™åˆå§‹è´¦å·åˆ†é…ä½™é¢ï¼Œéœ€è¦è¿™äº›è´¦æˆ·éœ€è¦æå‰åˆ›å»ºã€‚åœ¨æ·»åŠ peerèŠ‚ç‚¹çš„æ—¶å€™ï¼Œæ³¨æ„ä¸¤ä¸ªèŠ‚ç‚¹çš„é…ç½®è¦ä¸€è‡´ï¼Œç‰¹åˆ«æ˜¯chainIdï¼ŒåŒæ—¶èŠ‚ç‚¹æ—¶å¯å‘ç°çš„ï¼ˆdisable --nodiscoverï¼‰ã€‚åœ¨è½¬è´¦ä¹‹å‰éœ€è¦è§£é”è½¬è´¦è´¦æˆ·ï¼Œä¸€èˆ¬æˆ‘ä»¬ä¸ä¼šæ§åˆ¶ç›´æ¥è§£é”è´¦å·ï¼Œè¿™ç§æƒ…å†µå®¹æ˜“å¯¼è‡´è´¦æˆ·èµ„é‡‘è¢«HTTPæ–¹å¼è½¬ç§»ã€‚è§£é”è´¦æˆ·éœ€è¦å¼€å¯ï¼ˆ--allow-insecure-unlockï¼‰é…ç½®ã€‚

# é™„

## å‚è€ƒæ–‡çŒ®
[geth](https://geth.ethereum.org/)  
[go-ethereum](https://github.com/ethereum/go-ethereum/wiki)   
[go-ethereum github](https://github.com/ethereum/go-ethereum)     
[private blockchain generate](https://github.com/ethereum/go-ethereum/wiki/Private-network)    
[geth Command-Line-Options](https://github.com/ethereum/go-ethereum/wiki/Command-Line-Options)    
[Gethç®¡ç†APIæ–‡æ¡£](http://cw.hubwiz.com/card/c/geth-rpc-api/) 
[Web3.js 0.20 ä½¿ç”¨è¯´æ˜](https://learnblockchain.cn/docs/web3js-0.2x/index.html)
[ä»¥å¤ªåŠæµ‹è¯•ç§é“¾çš„æ­å»º](http://blog.luoyuanhang.com/2018/04/18/set-up-eth-private-chain-for-development/)          
[Geth ç¯å¢ƒæ­å»ºåŠä½¿ç”¨è¯´æ˜](http://zhaozhiming.github.io/blog/2018/04/13/setup-geth-env/)        
[gethä½¿ç”¨ç¬”è®°](https://www.jianshu.com/p/580235b9dd18)      
[ä»¥å¤ªåŠåˆ›ä¸–åŒºå—ä¸é“¾é…ç½®è½½å…¥åˆ†æ](https://blog.csdn.net/xilibi2003/article/details/89525891)   
[æ­å»ºç¯å¢ƒ,æ­å»ºç§é“¾](https://zhuanlan.zhihu.com/p/33865441)   
[ä»¥å¤ªåŠç§é“¾æ­å»º](https://www.jianshu.com/p/755a37ce1693)     
[ä»¥å¤ªåŠæ–‡æ¡£æ•´ç†](https://www.jianshu.com/p/3445ff08229a)     
[åˆ›å»ºæœ‰ä½™é¢çš„è´¦æˆ·](https://blog.csdn.net/sitebus/article/details/83379962)

## åœ¨çº¿å®‰è£…GETH


```
sudo apt-get install -q -y software-properties-common
sudo add-apt-repository -y ppa:ethereum/ethereum
sudo apt-get update -q -y
sudo apt-get install -q -y eth
```

  
## åˆ›å»ºè´¦å·çš„ä»¥å¦ä¸€ç§æ–¹å¼


```
$ geth account new
INFO [03-13|14:22:54] Maximum peer count                       ETH=25 LES=0 total=25
Your new account is locked with a password. Please give a password. Do not forget this password.
!! Unsupported terminal, password will be echoed.
Passphrase: 123456

Repeat passphrase: 123456

Address: {20edf297f7d0758b3cd8d36e3ae5d9fe02b62fad}

```

## æœåŠ¡å¯åŠ¨

æœ€å¿«é€Ÿå¯åŠ¨ geth çš„æ–¹å¼å°±æ˜¯åˆ›å»ºä¸€ä¸ªå…¨èŠ‚ç‚¹çš„ä»¥å¤ªåŠä¸»ç½‘ç»œï¼Œä½¿ç”¨å‘½ä»¤å¦‚ä¸‹ï¼š
```
geth console
```
å…¶ä¸­ console æ˜¯æŒ‡å¼€å¯äº¤äº’å¼å‘½ä»¤æ§åˆ¶å°ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ§åˆ¶å°ä¸Šè¾“å…¥å„ç§ geth çš„å‘½ä»¤ï¼Œæ¯”å¦‚è°ƒç”¨æŸ¥çœ‹è´¦å·ä¿¡æ¯ï¼ŒæŸ¥çœ‹è´¦å·é‡‘é¢ï¼Œè½¬è´¦äº¤æ˜“ç­‰ã€‚

æœåŠ¡å¯åŠ¨åè¿‡ä¸€ä¼šå°±ä¼šå¼€å§‹åŒæ­¥ä¸»ç½‘ç»œçš„ä¿¡æ¯ï¼Œä¸»ç½‘ç»œçš„ä¿¡æ¯æ˜¯éå¸¸åºå¤§çš„ï¼Œä»¥å‰æœ‰äººåŒæ­¥äº†åå‡ å¤©éƒ½æ²¡æœ‰åŒæ­¥å®Œæˆï¼Œå¦‚æœåªæ˜¯æœ¬åœ°æµ‹è¯•ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„æ–¹å¼æ­å»ºæµ‹è¯•ç½‘ç»œã€‚

æ–‡ä»¶å­˜å‚¨
geth çš„é»˜è®¤å­˜å‚¨è·¯å¾„æ˜¯~/.ethereumï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥é€šè¿‡--datadir æ–‡ä»¶è·¯å¾„ è¿™ä¸ªå‘½ä»¤æ¥æ”¹å˜å­˜å‚¨çš„ä½ç½®ã€‚

## ç®¡ç†apiè¡¥å……

eth.accounts æˆ–è€… personal.listAccounts
åˆ—å‡º geth é˜¶æ®µåˆ›å»ºçš„æ‰€æœ‰è´¦å·ã€‚
```
> eth.accounts
["0xa65cf03166298503d8e81053167bb8d97213f4a2", "0x2916e02bed03db3e3bc7bc50d3dc58600b6345e7", "0x9caffa7e0b76ed259725105ada174041023cf4a3"]
> 

```


æŸ¥è¯¢è´¦å·çš„é‡‘é¢ï¼Œéœ€è¦è¾“å…¥è´¦å·åœ°å€ã€‚
```
> eth.getBalance("0x9caffa7e0b76ed259725105ada174041023cf4a3")
0
```

eth.gasPrice
æŸ¥è¯¢çŸ¿å·¥â€å·¥ä½œé‡â€ä»·æ ¼ï¼Œæƒ³äº†è§£æ›´å¤šå…³äºgasçš„å†…å®¹è¯·å‚è€ƒè¿™ç¯‡æ–‡ç« ã€‚
```
eth.gasPrice
>
10000
```

eth.sendTransaction æˆ–è€… personal.sendTransaction
è¿›è¡Œè½¬è´¦äº¤æ˜“ï¼Œéœ€è¦è¾“å…¥è½¬è´¦çš„è´¦å·åœ°å€å’Œè½¬è´¦é‡‘é¢ã€‚

è·å–æœ€æ–°åŒºå—å·ï¼šeth.blockNumber
```
> eth.blockNumber
0
```
## ç›¸å…³é—®é¢˜
### Unable to locate package ethereum
```
E: Unable to locate package ethereum
```


```
donaldhan@Donaldhan:~$ sudo apt-get install -q -y eth
[sudo] password for donaldhan: 
Reading package lists...
Building dependency tree...
Reading state information...
Some packages could not be installed. This may mean that you have
requested an impossible situation or if you are using the unstable
distribution that some required packages have not yet been created
or been moved out of Incoming.
The following information may help to resolve the situation:

The following packages have unmet dependencies:
 eth : Depends: libboost-random1.58.0 but it is not installable
       Depends: libboost-thread1.58.0 but it is not installable
       Depends: libjsoncpp0v5 but it is not installable
       Depends: libjsonrpccpp-client0 but it is not installable
       Depends: libjsonrpccpp-common0 but it is not installable
       Depends: libjsonrpccpp-server0 but it is not installable
       Depends: libethereum (= 1.2.9-SNAPSHOT--20160629-6a05dd7~wily-0ubuntu2) but it is not going to be installed
       Depends: libleveldb1v5 but it is not installable
E: Unable to correct problems, you have held broken packages.
```

å‡ºç°è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä¹Ÿæ²¡æœ‰åŠæ³•ï¼Œä¾èµ–åŒ…ç¡®å®ï¼Œè¯•äº†å¥½å¤šæ–¹æ³•ï¼Œæœ€åæ”¾å¼ƒï¼Œå†³å®šä½¿ç”¨æºç ç¼–è¯‘å®‰è£…æ¨¡å¼ã€‚


### Fatal: Failed to write genesis block

```
Fatal: Failed to write genesis block: unsupported fork ordering: eip150Block not enabled, but eip155Block enabled at 0
```
é—®é¢˜åŸå› é…ç½®ç¼ºå¤±ï¼Œå…·ä½“å¦‚ä¸‹ï¼š

```
donaldhan@Donaldhan:~/Documents$ cat CustomGenesis.json 
{
		"config": {
			"chainId": 3131,
			"homesteadBlock": 0,
			"eip150Block": 0,
			"eip155Block": 0,
			"eip158Block": 0
		},
		"difficulty": "10000",
		"gasLimit": "2100000",
		"alloc": {
			"a65cf03166298503d8e81053167bb8d97213f4a2": { "balance": "800" },
			"2916e02bed03db3e3bc7bc50d3dc58600b6345e7": { "balance": "600" },
            "9caffa7e0b76ed259725105ada174041023cf4a3": { "balance": "800" }
		}
}

```

æˆ‘çš„æ˜¯ç¼ºå¤±å¦‚ä¸‹é…ç½®
```
"eip150Block": 0,
```

[Fatal: Failed to write genesis block](https://ethereum.stackexchange.com/questions/77453/fatal-failed-to-write-genesis-block-unsupported-fork-ordering-eip150block-not)



## æ–°å¢èŠ‚ç‚¹åä¸ç”Ÿæ•ˆ

é¦–å…ˆç¡®ä¿enodeä¿¡æ¯æ­£ç¡®åŒ…ï¼ŒåŒ…æ‹¬ç«¯å£ï¼Œipåœ°å€ç­‰ã€‚ åŒæ—¶èŠ‚ç‚¹çš„é…ç½®ä¹Ÿè¦ä¸€è‡´ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šå¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸­æ–¹å¼è§£å†³ã€‚

1. æ§åˆ¶å°å‘½ä»¤æ·»åŠ 

```
> admin.addPeer("enode://f78e7061fbc93ebb03ca7cdb36f2bda17b726cd034ef7d46423af64f8e8040d6fe5379885aa2f40052194421c123627ab4cf311b82d6696856be6b68fe5cb337@192.168.230.128:30303")
true
```


2. å¯åŠ¨æ—¶æŒ‡å®š
```
geth --bootnodes enode://f78e7061fbc93ebb03ca7cdb36f2bda17b726cd034ef7d46423af64f8e8040d6fe5379885aa2f40052194421c123627ab4cf311b82d6696856be6b68fe5cb337@192.168.230.128:30303 --identity "ETH-SlaveNode" --rpc --rpcport "6060" --rpccorsdomain "*" --datadir "/e/geth/data" --port "30303"  --maxpeers 5 --rpcapi "admin,db,eth,debug,miner,net,shh,txpool,personal,web3" --networkid 3131 console

```

3. åœ¨é™æ€èŠ‚ç‚¹æ–‡ä»¶ä¸­æ·»åŠ 
```
donaldhan@Donaldhan:~/Documents/data$ cd geth/
donaldhan@Donaldhan:~/Documents/data/geth$ ls
chaindata  lightchaindata  nodekey  static-nodes.json
ethash     LOCK            nodes    transactions.rlp
donaldhan@Donaldhan:~/Documents/data/geth$ pwd
/home/donaldhan/Documents/data/geth
donaldhan@Donaldhan:~/Documents/data/geth$ cat static-nodes.json 
[
  "enode://f78e7061fbc93ebb03ca7cdb36f2bda17b726cd034ef7d46423af64f8e8040d6fe5379885aa2f40052194421c123627ab4cf311b82d6696856be6b68fe5cb337@192.168.230.128:30303"
]
```

æˆ‘çš„æ˜¯ç”±äºé…ç½®ä¸ä¸€è‡´å¯¼è‡´çš„ï¼Œå…·ä½“åŸå› å…·ä½“å¯¹å¾…ã€‚ å¦‚æœä¸è¡Œå¯ä»¥å¯åŠ¨æ—¶ï¼Œå¼€å¯debugæ—¥å¿—çœ‹ä¸€ä¸‹ã€‚
[æ–°å¢èŠ‚ç‚¹åä¸ç”Ÿæ•ˆ](https://www.netkiller.cn/blockchain/ethereum/faq.add.node.html)  



### Error: authentication needed: password or unlock

```
Error: authentication needed: password or unlock
	at web3.js:6347:37(47)
	at web3.js:5081:62(37)
	at <eval>:1:21(15)

```

é—®é¢˜åŸå› ï¼Œè´¦æˆ·é’±åŒ…è¢«é”ï¼Œéœ€è¦ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å…ˆè§£é”
```
personal.unlockAccount("0x7dccf9e1f506cefb3e3f2b86d80af52573614209")
```



### account unlock with HTTP access is forbidden

```
GoError: Error: account unlock with HTTP access is forbidden at web3.js:6347:37(47)
	at native
	at <eval>:1:24(3)

```

é—®é¢˜åŸå› ï¼šåœ¨æ§åˆ¶å‘½ä»¤ä¸‹ï¼Œç¦æ­¢è§£é”è´¦æˆ·ï¼Œé˜²æ­¢é€šè¿‡HTTPæ–¹å¼è½¬ç§»è´¦æˆ·èµ„é‡‘çš„æƒ…å†µå‘ç”Ÿã€‚è§£å†³æ–¹å¼ï¼Œæˆ‘ä»¬åªéœ€è¦ï¼Œåœ¨å¯åŠ¨æ—¶ï¼Œæ·»åŠ å¦‚ä¸‹é…ç½®å³å¯
```
--allow-insecure-unlock
```

æˆ‘çš„å¯åŠ¨æ–¹å¼
```
geth --identity "ETH-MainNode" --rpc --rpcport "6060" --rpccorsdomain "*" --datadir "/home/donaldhan/Documents/data" --port "30303" --maxpeers 5 --allow-insecure-unlock  --rpcapi "admin,db,eth,debug,miner,net,shh,txpool,personal,web3" --networkid 3131 console

```

[GoError: Error: account unlock ](https://github.com/ethereum/go-ethereum/issues/19507)

### insufficient funds for gas * price + value
```
Error: insufficient funds for gas * price + value
	at web3.js:6347:37(47)
	at web3.js:5081:62(37)
	at <eval>:1:21(15)

```
é—®é¢˜åŸå› ï¼š
æ®è¯´æ˜¯ä¸ªbugï¼Œæ˜¯ç”±äºæ•°å­—è¿›è¡Œ16è¿›åˆ¶è½¬æ¢å››èˆäº”å…¥å¯¼è‡´çš„ã€‚æœ‰ä¸€ç§è§£å†³æ–¹å¼

æˆ–è€…ç›´æ¥å¼•ç”¨è´¦å·
```
> personal.unlockAccount(eth.accounts[0])
true
> eth.sendTransaction({from: eth.accounts[0], to: eth.accounts[1], value: web3.toWei("0.1", "ether")})
"0x178d40ffeeaa30bbab397d038b1a88a91639ad0c57abdb5b19b63b1ae5dc83f4"
```

å¦å¤–ä¸€ç§æ–¹å¼ï¼Œç›´æ¥ä½¿ç”¨Gethå‘½ä»¤æ‰§è¡Œ
```
geth --exec "eth.sendTransaction({from:'0xXXXX', to:'0xXXXX', value: 44999159999999999996, gas:21000});" attach
```

è¿˜æœ‰ä¿®æ”¹é…ç½®åˆ›ä¸–çºªæ–‡ä»¶çš„ï¼Œä¸è¿‡ä¸Šé¢ä¸¤ä¸ªæ–¹å¼ï¼Œæ²¡è¯•è¿‡ã€‚

æœ€åæˆ‘å°†è½¬è´¦çš„è´¦æˆ·æ¢ä¸ºæŒ–çŸ¿è´¦æˆ·ï¼Œè½¬è´¦æˆåŠŸï¼›æˆ‘çš„åŸå…ˆè½¬è´¦å¤±è´¥ï¼Œä½¿ç”¨çš„æ˜¯åˆ›ä¸–çºªçš„åˆå§‹è´¦æˆ·ã€‚
å…·ä½“å¤±è´¥åŸå› å¾…è§£å†³ã€‚

[Insufficient funds error when sending entire balance](https://github.com/ethereum/go-ethereum/issues/2173)   
[Error: insufficient funds for gas * price + value](https://github.com/ethereum/go-ethereum/issues/15983)    
[Insufficient funds for gas * price + value](https://ethereum.stackexchange.com/questions/9043/insufficient-funds-for-gas-price-value)

### Error: intrinsic gas too low
```
Error: intrinsic gas too low
	at web3.js:6347:37(47)
	at web3.js:5081:62(37)
	at <eval>:1:21(19)

```
[error Intrinsic gas too low](http://cw.hubwiz.com/card/c/ethereum-FAQ/1/2/4/)